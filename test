#!/bin/bash

PARAM_FILE="parameters.txt"

if [ -f "$PARAM_FILE" ]; then
    echo "Using parameters from $PARAM_FILE..."
    
    PDB_ID=$(grep "PDB ID" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    FORCEFIELD=$(grep "Forcefield" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    WATER_MODEL=$(grep "Water Model" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    BOX_TYPE=$(grep "Box Type" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    CONCENTRATION=$(grep "Concentration" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    EQUILIBRATION_TIME=$(grep "Equilibration Time" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    SIM_TIME=$(grep "Simulation Time" "$PARAM_FILE" | cut -d ":" -f2 | xargs)
    SIM_FRAMES=$(grep "Number of Frames" "$PARAM_FILE" | cut -d ":" -f2 | xargs)

    echo "Running simulation with the following parameters:"
    echo "PDB ID: $PDB_ID"
    echo "Forcefield: $FORCEFIELD"
    echo "Water Model: $WATER_MODEL"
    echo "Box Type: $BOX_TYPE"
    echo "Concentration: $CONCENTRATION M"
    echo "Equilibration Time: $EQUILIBRATION_TIME ps"
    echo "Simulation Time: $SIM_TIME ns"
    echo "Number of Frames: $SIM_FRAMES"

    # Placeholder for simulation command
    echo "Simulating... (Replace this with actual simulation command)"
    sleep 2  # Simulate a delay
    echo "Simulation complete."
else
    echo "Parameter file not found: $PARAM_FILE"
    exit 1
fi
